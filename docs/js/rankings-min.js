function renderOptions(a,f,c,b){var d="";if(b>=GALAXY_S3_PORTRAIT){d+='<div class="dropdowns"><p><table><tr><th>Event:</th><th>Result:</th><th>Age:</th></tr><tr>'}var e=filterEventIds(f,c);if(b<GALAXY_S3_PORTRAIT){d+='<div class="dropdowns"><table><tr><th>Event:</th>'}d+='<td><select id="eventId" onChange="switchView()">';for(var l=0;l<e.length;l++){var h=rankings.events[getEventIds().indexOf(e[l])];d+='<option value="'+h.id+'"';if(h.id==a){d+=" selected"}d+=">"+h.name+"</option>"}d+="</select></td>";var j=filterResultTypes(a,c);if(b<GALAXY_S3_PORTRAIT){d+="</tr><tr><th>Result:</th>"}d+='<td><select id="resultType" onChange="switchView()">';for(var g=0;g<j.length;g++){d+='<option value="'+j[g]+'"';if(j[g]==f){d+=" selected"}d+=">"+j[g].charAt(0).toUpperCase()+j[g].slice(1)+"</option>"}d+="</select></td>";var k=filterAgeCategories(a,f);if(b<GALAXY_S3_PORTRAIT){d+="</tr><tr><th>Age:</th>"}d+='<td><select id="ageCategory" onChange="switchView()">';for(var g=0;g<k.length;g++){d+='<option value="'+k[g]+'"';if(k[g]==c){d+=" selected"}d+=">Over "+k[g]+"</option>"}d+="</select></td></tr></table></p></div>";return d}function filterEventIds(b,d){var e=[];for(var g=0;g<rankings.events.length;g++){var f=rankings.events[g];for(var c=0;c<rankings.events[g].rankings.length;c++){var a=rankings.events[g].rankings[c];if(a.type==b&&a.age==d&&e.indexOf(f.id)<0){e.push(f.id)}}}return e}function filterResultTypes(e,d){var b=[];var f=rankings.events[getEventIds().indexOf(e)];for(var c=0;c<f.rankings.length;c++){var a=f.rankings[c];if(a.age==d&&b.indexOf(a.type)<0){b.push(a.type)}}if(b.indexOf("average")>=0&&b.indexOf("single")>=0){b=["single","average"]}return b}function filterAgeCategories(e,b){var c=[];var f=rankings.events[getEventIds().indexOf(e)];for(var d=0;d<f.rankings.length;d++){var a=f.rankings[d];if(a.type==b&&c.indexOf(a.age)<0){c.push(a.age)}}return c}function renderTable(a,i,g,c){var h="";var d=getPersonIds();var k=getCountryIds();var n=rankings.events[getEventIds().indexOf(a)];for(var o=0;o<n.rankings.length;o++){var f=n.rankings[o];if(f.type==i&&f.age==g){h+='<div class="rankings"><table>';h+="<tr>";h+='<th class="rank">Rank</th>';h+="<th>Person</th>";if(c>=IPHONE_LANDSCAPE){h+="<th>Country</th>"}h+="<th>Result</th>";h+="</tr>";var e=0;var j=0;for(var q=0;q<f.ranks.length;q++){var m=f.ranks[q];var l=rankings.persons[d.indexOf(m.id)];var p=rankings.countries[k.indexOf(l.country)];h+="<tr>";h+='<td class="rank">'+(m.rank>e?m.rank:"")+"</td>";var b='<a href="https://www.worldcubeassociation.org/persons/'+m.id+"?event="+a+'">'+l.name+"</a>";if(c>=IPHONE_LANDSCAPE){h+="<td>"+b+(m.hasOwnProperty("age")?", "+m.age+"+":"")+"</td>";h+="<td>"+p.name+"</td>"}else{h+="<td>"+b+", "+p.name+(m.hasOwnProperty("age")?", "+m.age+"+":"")+"</td>"}h+='<td class="result">'+m.best+"</td>";h+="</tr>";e=m.rank;j+=1}h+="</table></div>";if(f.hasOwnProperty("estimate")){h+="<p>Estimated number of seniors &#8776; "+f.estimate+"</p>";h+="<p>Estimated completeness of rankings &#8776; "+(100*j/f.estimate).toFixed(1)+"%</p>"}}}return h}function renderRankings(h,f){var c="";var d=getEventIds();var e=h[0].length>0?h[0]:d[0];var a=h.length>1&&h[1].length>0?h[1]:getResultTypes()[0];var b=h.length>2&&h[2].length>0?h[2]:"40";if(d.indexOf(e)>=0){var g=rankings.events[d.indexOf(e)];document.title=g.name+" - Over "+b+"s";c+=header();c+=renderOptions(e,a,b,f);c+=renderTable(e,a,b,f);c+=footer()}else{c+=parameterMessage("event",e)}document.getElementById("title").innerHTML=document.title;document.getElementById("refreshed").innerHTML=rankings.refreshed;document.getElementById("container").innerHTML=c};