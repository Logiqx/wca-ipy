function renderOptions(l,g,d,b,p,o){var t=getPersonIds();var s=getCountryIds();var h=getContinentIds();var r="";if(o>=GALAXY_S3_LANDSCAPE){r+='<div class="dropdowns"><p><table><tr><th>Event:</th><th>Result:</th><th>Age:</th><th>Continent:</th><th>Country:</th></tr><tr>'}else{if(o>=GALAXY_S3_PORTRAIT){r+='<div class="dropdowns"><p><table><tr><th>Event:</th><th>Result:</th><th>Age:</th></tr><tr>'}}var e=filterEventIds(g,d,b,p);if(o<GALAXY_S3_PORTRAIT){r+='<div class="dropdowns"><table><tr><th>Event:</th>'}r+='<td><select id="eventId" onChange="switchView()">';for(var c=0;c<e.length;c++){var a=rankings.events[getEventIds().indexOf(e[c])];r+='<option value="'+a.id+'"';if(a.id==l){r+=" selected"}r+=">"+a.name+"</option>"}r+="</select></td>";var u=filterResultTypes(l,d,b,p);if(o<GALAXY_S3_PORTRAIT){r+="</tr><tr><th>Result:</th>"}r+='<td><select id="resultType" onChange="switchView()">';for(var q=0;q<u.length;q++){r+='<option value="'+u[q]+'"';if(u[q]==g){r+=" selected"}r+=">"+u[q].charAt(0).toUpperCase()+u[q].slice(1)+"</option>"}r+="</select></td>";var j=filterAgeCategories(l,g,b,p);if(o<GALAXY_S3_PORTRAIT){r+="</tr><tr><th>Age:</th>"}r+='<td><select id="ageCategory" onChange="switchView()">';for(var q=0;q<j.length;q++){r+='<option value="'+j[q]+'"';if(j[q]==d){r+=" selected"}r+=">Over "+j[q]+"</option>"}r+="</select></td>";if(o<GALAXY_S3_LANDSCAPE&&o>=GALAXY_S3_PORTRAIT){r+='</tr></table></p></div><div class="dropdowns"><p><table><tr><th>Continent:</th><th>Country:</th></tr><tr>'}var m=filterContinents(l,g,d,p);if(o<GALAXY_S3_PORTRAIT){r+="</tr><tr><th>Continent:</th>"}r+='<td><select id="continentId" onChange="switchView()">';r+='<option value="xx"';if(b=="xx"){r+=" selected"}r+=">All Continents</option>";for(var q=0;q<h.length;q++){if(m.indexOf(h[q])>=0){var f=rankings.continents[q];r+='<option value="'+rankings.continents[q].id+'"';if(rankings.continents[q].id==b){r+=" selected"}r+=">"+rankings.continents[q].name+"</option>"}}r+="</select></td>";var k=filterCountries(l,g,d,b);if(o<GALAXY_S3_PORTRAIT){r+="</tr><tr><th>Country:</th>"}r+='<td><select id="countryId" onChange="switchView()">';r+='<option value="xx"';if(p=="xx"){r+=" selected"}r+=">All Countries</option>";for(var q=0;q<s.length;q++){if(k.indexOf(s[q])>=0){var n=rankings.countries[q];r+='<option value="'+rankings.countries[q].id+'"';if(rankings.countries[q].id==p){r+=" selected"}r+=">"+rankings.countries[q].name+"</option>"}}r+="</select></td></tr></table></p></div>";return r}function filterEventIds(e,d,a,j){var b=[];for(var m=0;m<rankings.events.length;m++){var h=rankings.events[m];for(var i=0;i<rankings.events[m].rankings.length;i++){var c=rankings.events[m].rankings[i];if(c.type==e&&c.age==d){for(var l=0;l<c.ranks.length;l++){var g=c.ranks[l];var f=rankings.persons[personIds.indexOf(g.id)];var k=rankings.countries[countryIds.indexOf(f.country)];if((a=="XX"||k.continent==a)&&(j=="XX"||f.country==j)){b.push(h.id);break}}}if(b.indexOf(h.id)>=0){break}}}return b}function filterResultTypes(a,d,b,i){var j=[];var g=rankings.events[getEventIds().indexOf(a)];for(var h=0;h<g.rankings.length;h++){var c=g.rankings[h];if(c.age==d&&j.indexOf(c.type)<0){for(var l=0;l<c.ranks.length;l++){var f=c.ranks[l];var e=rankings.persons[personIds.indexOf(f.id)];var k=rankings.countries[countryIds.indexOf(e.country)];if((b=="XX"||k.continent==b)&&(i=="XX"||e.country==i)){j.push(c.type);break}}}}if(j.indexOf("average")>=0&&j.indexOf("single")>=0){j=["single","average"]}return j}function filterAgeCategories(a,d,b,i){var j=[];var g=rankings.events[getEventIds().indexOf(a)];for(var h=0;h<g.rankings.length;h++){var c=g.rankings[h];if(c.type==d&&j.indexOf(c.age)<0){for(var l=0;l<c.ranks.length;l++){var f=c.ranks[l];var e=rankings.persons[personIds.indexOf(f.id)];var k=rankings.countries[countryIds.indexOf(e.country)];if((b=="XX"||k.continent==b)&&(i=="XX"||e.country==i)){j.push(c.age);break}}}}return j}function filterContinents(a,d,c,i){var j=[];var g=rankings.events[getEventIds().indexOf(a)];for(var h=0;h<g.rankings.length;h++){var b=g.rankings[h];if(b.type==d&&b.age==c){for(var l=0;l<b.ranks.length;l++){var f=b.ranks[l];var e=rankings.persons[personIds.indexOf(f.id)];var k=rankings.countries[countryIds.indexOf(e.country)];if((i=="XX"||e.country==i)&&j.indexOf(k.continent)<0){j.push(k.continent)}}}}return j}function filterCountries(a,e,d,b){var k=[];var h=rankings.events[getEventIds().indexOf(a)];for(var i=0;i<h.rankings.length;i++){var c=h.rankings[i];if(c.type==e&&c.age==d){for(var l=0;l<c.ranks.length;l++){var g=c.ranks[l];var f=rankings.persons[personIds.indexOf(g.id)];var j=rankings.countries[countryIds.indexOf(f.country)];if((b=="XX"||j.continent==b)&&k.indexOf(j.id)<0){k.push(j.id)}}}}return k}function renderTable(i,g,c,b,n,m){var q="";var t=getPersonIds();var s=getCountryIds();var h=getContinentIds();var a=rankings.events[getEventIds().indexOf(i)];if(b!="XX"||n!="XX"){q+='<p class="important">IMPORTANT: The continent and country filters do not provide any insights into missing seniors.</p>';q+='<p class="important">This information can only be regarded as the relative positions of known seniors, hence the lack of any numbering.</p>'}for(var e=0;e<a.rankings.length;e++){var d=a.rankings[e];if(d.type==g&&d.age==c){q+='<div class="rankings"><table>';q+="<tr>";if(b=="XX"&&n=="XX"){q+='<th class="rank">Rank</th>'}q+="<th>Person</th>";if(m>=IPHONE_LANDSCAPE){q+="<th>Country</th>"}q+="<th>Result</th>";q+="</tr>";var r=0;var f=0;for(var l=0;l<d.ranks.length;l++){var j=d.ranks[l];var o=rankings.persons[t.indexOf(j.id)];var k=rankings.countries[s.indexOf(o.country)];if((b=="XX"||k.continent==b)&&(n=="XX"||k.id==n)){q+="<tr>";if(b=="XX"&&n=="XX"){q+='<td class="rank">'+(j.rank>r?j.rank:"")+"</td>"}var p='<a href="https://www.worldcubeassociation.org/persons/'+j.id+"?event="+i+'">'+o.name+"</a>";if(m>=IPHONE_LANDSCAPE){q+="<td>"+p+(j.hasOwnProperty("age")?", "+j.age+"+":"")+"</td>";q+="<td>"+k.name+"</td>"}else{q+="<td>"+p+", "+k.name+(j.hasOwnProperty("age")?", "+j.age+"+":"")+"</td>"}q+='<td class="result">'+j.best+"</td>";q+="</tr>";r=j.rank}f+=1}q+="</table></div>";if(d.hasOwnProperty("estimate")){if(b=="XX"&&n=="XX"){q+="<p>Estimated number of seniors &#8776; "+d.estimate+"</p>";q+="<p>Estimated completeness of rankings &#8776; "+(100*f/d.estimate).toFixed(1)+"%</p>"}}}}return q}function renderRankings(b,c){var f="";var e=getEventIds();var a=b[0].length>0?b[0]:e[0];var h=b.length>1&&b[1].length>0?b[1].toLowerCase():getResultTypes()[0];var g=b.length>2&&b[2].length>0?b[2]:"40";var d=b.length>3&&b[3].length>0?b[3].toUpperCase():"XX";var j=b.length>4&&b[4].length>0?b[4].toUpperCase():"XX";if(e.indexOf(a)>=0){var i=rankings.events[e.indexOf(a)];document.title=i.name+" - Over "+g+"s";f+=header();f+=renderOptions(a,h,g,d,j,c);f+=renderTable(a,h,g,d,j,c);f+=footer()}else{f+=parameterMessage("event",a)}document.getElementById("title").innerHTML=document.title;document.getElementById("refreshed").innerHTML=rankings.refreshed;document.getElementById("container").innerHTML=f};