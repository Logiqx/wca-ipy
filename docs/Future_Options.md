# Senior Rankings

## Overview

The project has three basic goals / requirements:

1. We wish to provide senior rankings - Over 40s, Over 50s, Over 60s, etc.

2. We wish to provide actual rankings, regardless of how many people are actually shown

3. We wish to protect the identities of competitors who have not provided their consent

### Future Options

Two simple options are being proposed to address the three goals /requirements. Neither option requires the WCA to provide any DOB information. Both options are based on the WCA running SQL on their server and providing the outputs so that this project can produce the senior rankings using existing code. The intermediate CSV can be nigh-on identical to the one that is used to generate the [partial rankings](http://logiqx.github.io/wca-ipy/Partial_Rankings.html).

An example of the intermediate CSV can be viewed on GitHub: [known_senior_averages.csv](https://github.com/Logiqx/wca-ipy/blob/master/data/public/extract/known_senior_averages.csv)

### Option 1

The SQL that produces the intermediate CSV file is the second SQL query: [extract_senior_details.sql](https://github.com/Logiqx/wca-ipy/blob/master/sql/extract_senior_details.sql)

If the last two queries are run on the WCA server and the outputs are provided, existing code can produce senior rankings whilst suppressing the people who have not provided their consent. The result would be identical to the existing [partial rankings](http://logiqx.github.io/wca-ipy/Partial_Rankings.html) except the rank numbers would be 100% representative.

Note: There would be gaps in the numbering but all rankings would represent the actual ranking amongst all senior competitors, within the appropriate age group.

This is the preferred proposal and a legal document could be signed should it be required, agreeing that the WCA IDs will not be shared with anyone or used for purposes other than these rankings.

Note: The intermediate CSV will not include DOB information as it is not required from the WCA.

### Option 2

The second proposal would be to modify the SQL to filter out the people who have not given their consent and calculate the rankings within the SQL itself. A smaller file would be generated by the WCA, including only the results of competitors who have opted into the senior rankings.

This second approach has two downsides though.

1. Firstly, the SQL script to generate Over 40s, Over 50s ... Over 80s would need to run multiple queries and combine the results. This is not the end of the world but it would take several times longer to run; possible minutes rather than 10s of seconds.

2. Secondly and most significantly is that updated SQL would have to be provided to the WCA when new people give their consent to be included. It would make the consent process a lot more clunky and place more burden on everybody involved.

Due to the downsides described above, option 1 is the recommended approach, with an appropriate agreement on how the extracts will be used.

## Summary

The end result of both options addresses the three requirements described earlier:

1. Senior rankings - YES
2. Actual rankings - YES
3. Protect privacy - YES

There is no need to receive any DOB information in order to produce the rankings and nobody will appear in the senior rankings without providing their consent

Both options provide the same level of information as the [partial rankings](http://logiqx.github.io/wca-ipy/Partial_Rankings.html) whilst omitting competitors who have not provided their consent.

The reports will be consistent with the proposal for [official senior rankings](https://logiqx.github.io/wca-ipy/WCA_Proposal.html) which was submitted in February 2019.

